<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        
    
    <link rel='stylesheet' href="/./css/dracula.css">

        <title>选择元素的基本方法（1月22日23日）</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=2.0">
<link rel="stylesheet" href="/css/style.css">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="manifest" href="/site.webmanifest">

    <meta name="generator" content="Hexo 7.3.0"></head>
    <body>
        <header class="al_header al_pos_fixed">
    <div class="al_header_container dis_flex_jcenter">
        <div class="al_header_container_left">
            <div class="al_header_site_title">
                <a href="/">Hexo</a>
            </div>
        </div>

        <div class="dis_flex_jcenter">
            <div class="al_header_setting">
                <svg class="al_header_icon">
                    <use xmlns="http://www.w3.org/2000/svg" xlink:href="/assets/svg_icons.svg#svg-menu"></use>
                </svg>
            </div>
        </div>
    </div>
</header>

        <div class="al_sidebar">

    <div class="al_sidebar_overlay al_full_cover"></div>

    <div class="al_pos_fixed al_sidebar_cnt">
        <div class="dis_flex_acenter al_sidebar_header">
            <h3>Hexo</h3>
            <div class="al_sidebar_close al_header_setting">
                <svg class="al_header_icon">
                    <use xmlns="http://www.w3.org/2000/svg" xlink:href="/assets/svg_icons.svg#svg-close"></use>
                </svg>
            </div>
        </div>

        <div class="al_sidebar_author_cnt">

            <div class="al_sidebar_author_info">
                <h4>John Doe</h4>
                <img class="al_sidebar_avatar" src="https://yourAvatorURL">
                <p></p>
            </div>

            
        </div>
    </div>
</div>

        
    <div class="dis_flex_center al_lightbox_cnt al_full_cover">
        <img class="al_lightbox_img"/>
    </div>
    <div class="al_page_background dis_flex_center al_full_cover"></div>
    <div class="al_page_container">
        <div class="al_pos_ab al_fake_background"></div>
        <div class="al_main_container al_shadow al_main_page_container">
            <article class="al_article">
                <header>
                    <h1 class="al_page_title">
                        选择元素的基本方法（1月22日23日）
                    </h1>
                    <div class="al_page_info dis_flex">
                        <div class="al_page_content_info">
                            Thu January 23, 2025 09:52 PM
                        </div>

                        

                        
                        <span class="tags"></span>
                    </div>
                </header>

                
                    <div class="al_page_content_outline">
                        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%89%E6%8B%A9%E5%85%83%E7%B4%A0%E7%9A%84%E6%96%B9%E6%B3%95"><span class="toc-text">选择元素的方法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E5%85%83%E7%B4%A0%E7%9A%84%E7%89%B9%E5%BE%81"><span class="toc-text">查看元素的特征</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A0%B9%E6%8D%AE-id%E5%B1%9E%E6%80%A7-%E9%80%89%E6%8B%A9%E5%85%83%E7%B4%A0"><span class="toc-text">根据 id属性 选择元素</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A0%B9%E6%8D%AE-class%E5%B1%9E%E6%80%A7%E3%80%81tag%E5%90%8D-%E9%80%89%E6%8B%A9%E5%85%83%E7%B4%A0"><span class="toc-text">根据 class属性、tag名 选择元素</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B9%E6%8D%AE-class%E5%B1%9E%E6%80%A7-%E9%80%89%E6%8B%A9%E5%85%83%E7%B4%A0"><span class="toc-text">根据 class属性 选择元素</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B9%E6%8D%AE-tag-%E5%90%8D-%E9%80%89%E6%8B%A9%E5%85%83%E7%B4%A0"><span class="toc-text">根据 tag 名 选择元素</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#find-element-%E5%92%8C-find-elements-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-text">find_element 和 find_elements 的区别</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%9A%E8%BF%87WebElement%E5%AF%B9%E8%B1%A1%E9%80%89%E6%8B%A9%E5%85%83%E7%B4%A0"><span class="toc-text">通过WebElement对象选择元素</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AD%89%E5%BE%85%E7%95%8C%E9%9D%A2%E5%85%83%E7%B4%A0%E5%87%BA%E7%8E%B0"><span class="toc-text">等待界面元素出现</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9A%90%E5%BC%8F%E7%AD%89%E5%BE%85-%E6%88%96%E8%80%85-%E5%85%A8%E5%B1%80%E7%AD%89%E5%BE%85"><span class="toc-text">隐式等待 或者 全局等待</span></a></li></ol></li></ol>
                    </div>
                

                
                <section id="post-body">
                    <h2 id="选择元素的方法"><a href="#选择元素的方法" class="headerlink" title="选择元素的方法"></a>选择元素的方法</h2><p>方法：告诉浏览器，你要操作的这个 web 元素的特征</p>
<h3 id="查看元素的特征"><a href="#查看元素的特征" class="headerlink" title="查看元素的特征"></a>查看元素的特征</h3><p>可以使用浏览器的 <code>开发者工具栏</code> 帮我们查看、选择 web 元素。</p>
<p>用浏览器访问百度，按F12后，点击下图箭头处的 <code>Elements</code> 标签，即可查看页面对应的HTML 元素，之后，鼠标在界面上点击哪个元素，就可以查看该元素对应的html标签了</p>
<h2 id="根据-id属性-选择元素"><a href="#根据-id属性-选择元素" class="headerlink" title="根据 id属性 选择元素"></a>根据 id属性 选择元素</h2><p>我们可以把 id 想象成元素的编号， 是用来在html中标记该元素的。</p>
<p>根据规范， 如果元素有id属性 ，这个id 必须是当前html中唯一的。</p>
<p>所以如果元素有id， 根据id选择元素是最简单高效的方式。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建 WebDriver 对象</span></span><br><span class="line">wd = webdriver.Chrome()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 调用WebDriver 对象的get方法 可以让浏览器打开指定网址</span></span><br><span class="line">wd.get(<span class="string">&#x27;https://www.byhy.net/cdn2/files/selenium/stock1.html&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 根据id选择元素，返回的就是该元素对应的WebElement对象</span></span><br><span class="line">element = wd.find_element(By.ID, <span class="string">&#x27;kw&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 通过该 WebElement对象，就可以对页面元素进行操作了</span></span><br><span class="line"><span class="comment"># 比如输入字符串到 这个 输入框里</span></span><br><span class="line">element.send_keys(<span class="string">&#x27;通讯\n&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>高亮的第11行代码</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wd.find_element(By.ID, &#x27;kw&#x27;)</span><br></pre></td></tr></table></figure>

<p>使用了 WebDriver 对象 的方法 <code>find_element</code> ，</p>
<p>这行代码运行是，就会发起一个请求通过 浏览器驱动 转发给浏览器，告诉它，需要选择一个id为 kw 的元素。</p>
<p>浏览器 找到id为kw的元素后，将结果通过 浏览器驱动 返回给 自动化程序， 所以 find_element 方法会 返回一个WebElement 类型的对象。</p>
<p>这个WebElement 对象可以看成是对应 <code>页面元素</code> 的遥控器。</p>
<p>我们通过这个WebElement对象，就可以操控对应的界面元素。</p>
<h2 id="根据-class属性、tag名-选择元素"><a href="#根据-class属性、tag名-选择元素" class="headerlink" title="根据 class属性、tag名 选择元素"></a>根据 class属性、tag名 选择元素</h2><h3 id="根据-class属性-选择元素"><a href="#根据-class属性-选择元素" class="headerlink" title="根据 class属性 选择元素"></a>根据 class属性 选择元素</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;plant&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>土豆<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;plant&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>洋葱<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;plant&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>白菜<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;animal&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>狮子<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;animal&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>老虎<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;animal&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>山羊<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>注意</strong></p>
<p>find_elements 返回的是找到的符合条件的 <code>所有</code> 元素 (这里有3个元素)， 放在一个列表中返回。</p>
<p>而如果我们使用 wd.find_element (注意少了一个s) 方法,就只会返回第一个元素。</p>
<h3 id="根据-tag-名-选择元素"><a href="#根据-tag-名-选择元素" class="headerlink" title="根据 tag 名 选择元素"></a>根据 tag 名 选择元素</h3><p>类似的，我们可以通过指定 参数为 <code>By.TAG_NAME</code> ，选择所有的tag名为 div的元素，如下所示</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"></span><br><span class="line">wd = webdriver.Chrome()</span><br><span class="line"></span><br><span class="line">wd.get(<span class="string">&#x27;https://www.byhy.net/cdn2/files/selenium/sample1.html&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 根据 tag name 选择元素，返回的是 一个列表</span></span><br><span class="line"><span class="comment"># 里面 都是 tag 名为 div 的元素对应的 WebElement对象</span></span><br><span class="line">elements = wd.find_elements(By.TAG_NAME, <span class="string">&#x27;div&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 取出列表中的每个 WebElement对象，打印出其text属性的值</span></span><br><span class="line"><span class="comment"># text属性就是该 WebElement对象对应的元素在网页中的文本内容</span></span><br><span class="line"><span class="keyword">for</span> element <span class="keyword">in</span> elements:</span><br><span class="line">    <span class="built_in">print</span>(element.text)</span><br></pre></td></tr></table></figure>

<h3 id="find-element-和-find-elements-的区别"><a href="#find-element-和-find-elements-的区别" class="headerlink" title="find_element 和 find_elements 的区别"></a>find_element 和 find_elements 的区别</h3><p>使用 <code>find_elements</code> 选择的是符合条件的所有元素， 如果没有符合条件的元素， <code>返回空列表</code></p>
<p>使用 <code>find_element</code> 选择的是符合条件的 <code>第一个</code> 元素， 如果没有符合条件的元素， 抛出NoSuchElementException异常</p>
<h2 id="通过WebElement对象选择元素"><a href="#通过WebElement对象选择元素" class="headerlink" title="通过WebElement对象选择元素"></a>通过WebElement对象选择元素</h2><p>WebDriver 对象 选择元素的范围是 整个 web页面， 而</p>
<p>WebElement 对象 选择元素的范围是 该元素的内部。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">from selenium import webdriver</span><br><span class="line">from selenium.webdriver.common.by import By</span><br><span class="line"></span><br><span class="line">wd = webdriver.Chrome()</span><br><span class="line"></span><br><span class="line">wd.get(&#x27;https://www.byhy.net/cdn2/files/selenium/sample1.html&#x27;)</span><br><span class="line"></span><br><span class="line">element = wd.find_element(By.ID,&#x27;container&#x27;)</span><br><span class="line"></span><br><span class="line"># 限制 选择元素的范围是 id 为 container 元素的内部。</span><br><span class="line">spans = element.find_elements(By.TAG_NAME, &#x27;span&#x27;)</span><br><span class="line">for span in spans:</span><br><span class="line">    print(span.text)</span><br></pre></td></tr></table></figure>

<h2 id="等待界面元素出现"><a href="#等待界面元素出现" class="headerlink" title="等待界面元素出现"></a>等待界面元素出现</h2><p>当发现元素没有找到的时候，并不立即返回找不到元素的错误。</p>
<p>而是周期性（每隔半秒钟）重新寻找该元素，直到该元素找到，</p>
<p>或者超出指定最大等待时长，这时才 抛出异常（如果是 <code>find_elements</code> 之类的方法， 则是返回空列表）。</p>
<h3 id="隐式等待-或者-全局等待"><a href="#隐式等待-或者-全局等待" class="headerlink" title="隐式等待 或者 全局等待"></a>隐式等待 或者 全局等待</h3><p>Selenium 的 Webdriver 对象 有个方法叫 implicitly_wait ，可以称之为 隐式等待 ，或者 全局等待 。</p>
<p>该方法接受一个参数， 用来指定 最大等待时长。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">from selenium import webdriver</span><br><span class="line">from selenium.webdriver.common.by import By</span><br><span class="line"></span><br><span class="line">wd = webdriver.Chrome()</span><br><span class="line">wd.implicitly_wait(10)</span><br><span class="line"></span><br><span class="line">wd.get(&#x27;https://www.byhy.net/cdn2/files/selenium/stock1.html&#x27;)</span><br><span class="line"></span><br><span class="line">element = wd.find_element(By.ID, &#x27;kw&#x27;)</span><br><span class="line"></span><br><span class="line">element.send_keys(&#x27;通讯\n&#x27;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 返回页面 ID为1 的元素</span><br><span class="line">element = wd.find_element(By.ID,&#x27;1&#x27;)</span><br><span class="line"></span><br><span class="line">print(element.text)</span><br></pre></td></tr></table></figure>


                </section>

                
                

                

            </article>

            
            <nav class="dis_flex al_post_nav">
                <a class="al_post_nav_item dis_flex_acenter" href="/2025/01/24/%E6%93%8D%E6%8E%A7%E5%85%83%E7%B4%A0%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%96%B9%E6%B3%95%EF%BC%881%E6%9C%8824%E6%97%A5%EF%BC%89/">
                    
                        <svg class="al_arrow">
                            <use xmlns="http://www.w3.org/2000/svg" xlink:href="/assets/svg_icons.svg#svg-arrow-left"></use>
                        </svg>
                        <span class="al_text_ellipsis al_post_nav_desc">操控元素的基本方法（1月24日）</span>
                    
                </a>
                <a class="al_post_nav_item dis_flex_acenter" href="/2025/01/21/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95%E5%88%9D%E8%AF%86%EF%BC%881%E6%9C%8821%E6%97%A5%EF%BC%89/">
                    
                        <span class="al_text_ellipsis al_post_nav_desc">自动化测试初识（1月21日）</span>
                        <svg class="al_arrow">
                            <use xmlns="http://www.w3.org/2000/svg" xlink:href="/assets/svg_icons.svg#svg-arrow-right"></use>
                        </svg>
                    
                </a>
            </nav>
        </div>
    </div>


        <div class="al_index_footer dis_flex_center">
    <div class="al_index_footer_item al_index_footer_title">
        John Doe
    </div>

    
    

    <div class="al_index_footer_item al_index_footer_extra">
        Created By 
        <a target="_blank" rel="noopener" href="https://github.com/iGuan7u/Acetolog">AcetoLog</a>
         · Power By 
        <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>
    </div>

    <div class="al_index_footer_item al_index_footer_extra_right">
        All Right Reserved
    </div>
</div>

        <script type="text/javascript" async="async" src="/javascripts/acelog.js"></script>
        
        
        
        
        

    </body>
</html>