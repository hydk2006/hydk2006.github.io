<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        
    
    <link rel='stylesheet' href="/./css/dracula.css">

        <title>迭代器（2月2日）</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=2.0">
<link rel="stylesheet" href="/css/style.css">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="manifest" href="/site.webmanifest">

    <meta name="generator" content="Hexo 7.3.0"></head>
    <body>
        <header class="al_header al_pos_fixed">
    <div class="al_header_container dis_flex_jcenter">
        <div class="al_header_container_left">
            <div class="al_header_site_title">
                <a href="/">Hexo</a>
            </div>
        </div>

        <div class="dis_flex_jcenter">
            <div class="al_header_setting">
                <svg class="al_header_icon">
                    <use xmlns="http://www.w3.org/2000/svg" xlink:href="/assets/svg_icons.svg#svg-menu"></use>
                </svg>
            </div>
        </div>
    </div>
</header>

        <div class="al_sidebar">

    <div class="al_sidebar_overlay al_full_cover"></div>

    <div class="al_pos_fixed al_sidebar_cnt">
        <div class="dis_flex_acenter al_sidebar_header">
            <h3>Hexo</h3>
            <div class="al_sidebar_close al_header_setting">
                <svg class="al_header_icon">
                    <use xmlns="http://www.w3.org/2000/svg" xlink:href="/assets/svg_icons.svg#svg-close"></use>
                </svg>
            </div>
        </div>

        <div class="al_sidebar_author_cnt">

            <div class="al_sidebar_author_info">
                <h4>John Doe</h4>
                <img class="al_sidebar_avatar" src="https://yourAvatorURL">
                <p></p>
            </div>

            
        </div>
    </div>
</div>

        
    <div class="dis_flex_center al_lightbox_cnt al_full_cover">
        <img class="al_lightbox_img"/>
    </div>
    <div class="al_page_background dis_flex_center al_full_cover"></div>
    <div class="al_page_container">
        <div class="al_pos_ab al_fake_background"></div>
        <div class="al_main_container al_shadow al_main_page_container">
            <article class="al_article">
                <header>
                    <h1 class="al_page_title">
                        迭代器（2月2日）
                    </h1>
                    <div class="al_page_info dis_flex">
                        <div class="al_page_content_info">
                            Sun February 2, 2025 07:18 PM
                        </div>

                        

                        
                        <span class="tags"></span>
                    </div>
                </header>

                
                    <div class="al_page_content_outline">
                        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%BF%AD%E4%BB%A3%E5%99%A8%EF%BC%88Iterator%EF%BC%89"><span class="toc-text">迭代器（Iterator）</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E8%BF%AD%E4%BB%A3%E5%99%A8%EF%BC%9F"><span class="toc-text">什么是迭代器？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%AD%E4%BB%A3%E5%99%A8%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%BB%84%E6%88%90"><span class="toc-text">迭代器的基本组成</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%89%8B%E5%8A%A8%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E8%BF%AD%E4%BB%A3%E5%99%A8"><span class="toc-text">手动实现一个迭代器</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%94%9F%E6%88%90%E5%99%A8"><span class="toc-text">生成器</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%9F%E6%88%90%E5%99%A8%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-text">生成器的基本使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E7%94%9F%E6%88%90%E5%99%A8"><span class="toc-text">使用生成器</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%94%9F%E6%88%90%E5%99%A8%E4%B8%8E%E8%BF%AD%E4%BB%A3%E5%99%A8%E7%9A%84%E5%85%B3%E7%B3%BB"><span class="toc-text">生成器与迭代器的关系</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#iter-%E6%96%B9%E6%B3%95"><span class="toc-text">iter 方法</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#next-%E6%96%B9%E6%B3%95"><span class="toc-text">next 方法</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%94%9F%E6%88%90%E5%99%A8%E7%9A%84%E4%BC%98%E5%8A%BF"><span class="toc-text">生成器的优势</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%BF%AD%E4%BB%A3%E5%99%A8%E4%B8%8E%E7%94%9F%E6%88%90%E5%99%A8%E7%9A%84%E6%80%A7%E8%83%BD%E6%AF%94%E8%BE%83"><span class="toc-text">迭代器与生成器的性能比较</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%88%97%E8%A1%A8%E4%B8%8E%E7%94%9F%E6%88%90%E5%99%A8%E7%9A%84%E5%86%85%E5%AD%98%E6%AF%94%E8%BE%83"><span class="toc-text">列表与生成器的内存比较</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%BF%AD%E4%BB%A3%E5%99%A8%E4%B8%8E%E7%94%9F%E6%88%90%E5%99%A8%E5%AF%B9%E7%88%AC%E8%99%AB%E5%BC%80%E5%8F%91%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-text">迭代器与生成器对爬虫开发的作用</span></a></li></ol>
                    </div>
                

                
                <section id="post-body">
                    <h1 id="迭代器（Iterator）"><a href="#迭代器（Iterator）" class="headerlink" title="迭代器（Iterator）"></a>迭代器（Iterator）</h1><h2 id="什么是迭代器？"><a href="#什么是迭代器？" class="headerlink" title="什么是迭代器？"></a>什么是迭代器？</h2><p>迭代器是一种对象，它能“记住”遍历的状态，并且提供了一种逐个访问集合中元素的方式。你可以通过迭代器遍历任何支持迭代协议（即 <strong>iter</strong>() 和 <strong>next</strong>() 方法的对象）。</p>
<h2 id="迭代器的基本组成"><a href="#迭代器的基本组成" class="headerlink" title="迭代器的基本组成"></a>迭代器的基本组成</h2><p><strong>iter</strong>()：返回迭代器对象本身，通常是返回自己。这个方法用于初始化迭代器。<br><strong>next</strong>()：返回当前元素，并将迭代器状态前进到下一个元素。当没有元素可迭代时，抛出 StopIteration 异常。</p>
<h2 id="手动实现一个迭代器"><a href="#手动实现一个迭代器" class="headerlink" title="手动实现一个迭代器"></a>手动实现一个迭代器</h2><p>你可以通过实现一个类来创建迭代器。类必须实现 <strong>iter</strong>() 和 <strong>next</strong>() 方法。</p>
<p>示例：手动实现一个简单的数字迭代器：</p>
<pre><code>class Counter:
    def __init__(self, low, high):
        self.current = low
        self.high = high
def __iter__(self):
    return self  # 迭代器对象本身
 
def __next__(self):
    if self.current &gt; self.high:
        raise StopIteration  # 抛出停止迭代的异常
    self.current += 1
    return self.current - 1  # 返回当前数字
    counter = Counter(3, 7)
for num in counter:
    print(num)
</code></pre>
<h1 id="生成器"><a href="#生成器" class="headerlink" title="生成器"></a>生成器</h1><p>生成器是迭代器的一种简化实现方式，通常是通过一个包含 yield 关键字的函数来创建。生成器具有与普通函数相同的特性，但其执行流程不再是一次性返回结果，而是每次遇到 yield 时返回一个值，并暂停函数执行，直到下次恢复。</p>
<h2 id="生成器的基本使用"><a href="#生成器的基本使用" class="headerlink" title="生成器的基本使用"></a>生成器的基本使用</h2><p>一个简单的生成器函数：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">def count_up_to(max):</span><br><span class="line">    count = 1</span><br><span class="line">    while count &lt;= max:</span><br><span class="line">        yield count  # 每次返回当前计数值，并暂停</span><br><span class="line">        count += 1</span><br></pre></td></tr></table></figure>



<h2 id="使用生成器"><a href="#使用生成器" class="headerlink" title="使用生成器"></a>使用生成器</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">counter = count_up_to(3)</span><br><span class="line">print(next(counter))  # 输出 1</span><br><span class="line">print(next(counter))  # 输出 2</span><br><span class="line">print(next(counter))  # 输出 3</span><br></pre></td></tr></table></figure>

<p>在上述代码中，count_up_to 是一个生成器函数，它使用 yield 返回当前数字，并在下一次迭代时从上次 yield 的地方继续执行。</p>
<h1 id="生成器与迭代器的关系"><a href="#生成器与迭代器的关系" class="headerlink" title="生成器与迭代器的关系"></a>生成器与迭代器的关系</h1><ul>
<li><strong>生成器是迭代器</strong>：每次调用生成器函数时，返回一个迭代器对象。</li>
<li><strong>生成器自动实现了 <code>__iter__()</code> 和 <code>__next__()</code></strong>：这意味着你不需要显式定义这些方法，它们已经内置。</li>
</ul>
<h1 id="iter-方法"><a href="#iter-方法" class="headerlink" title="iter 方法"></a><strong>iter</strong> 方法</h1><p><strong>iter</strong> 方法需要返回一个迭代器对象。在大多数情况下，迭代器对象就是实现了迭代器协议的对象自身，这意味着同一个对象既是可迭代的（实现了 <strong>iter</strong> 方法），也是迭代器（实现了 <strong>next</strong> 方法）。但是，这并不是必须的；<strong>iter</strong> 方法也可以返回不同的迭代器对象。</p>
<pre><code>class Counter:  
    def __init__(self, low, high):  
        self.current = low  
        self.high = high  
def __iter__(self):  
    return self  # 返回自身作为迭代器  
  
def __next__(self):  
    if self.current &gt; self.high:  
        raise StopIteration  
    else:  
        self.current += 1  
        return self.current - 1  
        counter = Counter(3, 8)  
for i in counter:  
    print(i)

#输出
3 4 5 6 7 8
</code></pre>
<h1 id="next-方法"><a href="#next-方法" class="headerlink" title="next 方法"></a><strong>next</strong> 方法</h1><p><strong>next</strong> 方法用于返回迭代器中的下一个元素。当迭代器中的所有元素都已被访问时，<strong>next</strong> 方法应该抛出 StopIteration 异常来通知迭代过程结束。</p>
<p>在上面的 Counter 例子中，<strong>next</strong> 方法每次被调用时都会返回当前值，然后增加 current 的值。当 current 大于 high 时，抛出 StopIteration 异常。</p>
<h1 id="生成器的优势"><a href="#生成器的优势" class="headerlink" title="生成器的优势"></a>生成器的优势</h1><ol>
<li><strong>内存效率</strong>：生成器不会一次性把所有数据存储在内存中，而是按需生成。</li>
<li><strong>懒计算</strong>：只有在需要时才计算下一个值，适用于处理大数据或无限数据流。</li>
</ol>
<h1 id="迭代器与生成器的性能比较"><a href="#迭代器与生成器的性能比较" class="headerlink" title="迭代器与生成器的性能比较"></a>迭代器与生成器的性能比较</h1><ul>
<li><strong>迭代器</strong>：如果你手动实现一个迭代器，它会在内存中一次性创建所有的数据。</li>
<li><strong>生成器</strong>：生成器是“懒加载”的，它按需生成数据，可以在处理大型数据集时节省大量内存。</li>
</ul>
<h1 id="列表与生成器的内存比较"><a href="#列表与生成器的内存比较" class="headerlink" title="列表与生成器的内存比较"></a>列表与生成器的内存比较</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">arge_list = [x for x in range(10**6)]</span><br><span class="line"></span><br><span class="line">def large_gen():</span><br><span class="line">    for x in range(10**6):</span><br><span class="line">        yield x</span><br><span class="line"></span><br><span class="line">gen = large_gen()  # 不会立即占用大量内存</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>迭代器</strong>是支持迭代协议的对象，必须实现 <code>__iter__()</code> 和 <code>__next__()</code> 方法。</li>
<li><strong>生成器</strong>是迭代器的一种简化实现，通常通过 <code>yield</code> 关键字来定义，它具有懒加载特性。</li>
<li>生成器相比于列表等数据结构具有更好的内存效率，适合处理大数据集。</li>
</ul>
<h1 id="迭代器与生成器对爬虫开发的作用"><a href="#迭代器与生成器对爬虫开发的作用" class="headerlink" title="迭代器与生成器对爬虫开发的作用"></a>迭代器与生成器对爬虫开发的作用</h1><p>在爬虫开发中，迭代器与生成器的作用主要体现在数据处理和流式传输方面。</p>
<p>数据处理：爬虫从网页上抓取的数据通常是以列表、字典等形式存在的，这些数据结构都是可迭代的。因此，可以使用迭代器来遍历和处理这些数据。此外，生成器也可以用于处理这些数据，特别是在需要对数据进行转换或过滤时。生成器的惰性求值特性使得它可以在处理大量数据时保持高效的内存使用。</p>
<p>流式传输：在爬虫开发中，有时需要将抓取的数据实时传输给其他系统或组件进行处理。这时，可以使用生成器来实现数据的流式传输。生成器可以按需生成数据，并在每次生成数据时将其传输给下游系统或组件进行处理，从而实现数据的实时处理和传输。这种流式传输方式可以大大提高爬虫系统的处理效率和响应速度。</p>

                </section>

                
                

                

            </article>

            
            <nav class="dis_flex al_post_nav">
                <a class="al_post_nav_item dis_flex_acenter" href="/">
                    
                </a>
                <a class="al_post_nav_item dis_flex_acenter" href="/2025/02/01/%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B%EF%BC%882%E6%9C%881%E6%97%A5%EF%BC%89/">
                    
                        <span class="al_text_ellipsis al_post_nav_desc">异步编程（2月1日）</span>
                        <svg class="al_arrow">
                            <use xmlns="http://www.w3.org/2000/svg" xlink:href="/assets/svg_icons.svg#svg-arrow-right"></use>
                        </svg>
                    
                </a>
            </nav>
        </div>
    </div>


        <div class="al_index_footer dis_flex_center">
    <div class="al_index_footer_item al_index_footer_title">
        John Doe
    </div>

    
    

    <div class="al_index_footer_item al_index_footer_extra">
        Created By 
        <a target="_blank" rel="noopener" href="https://github.com/iGuan7u/Acetolog">AcetoLog</a>
         · Power By 
        <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>
    </div>

    <div class="al_index_footer_item al_index_footer_extra_right">
        All Right Reserved
    </div>
</div>

        <script type="text/javascript" async="async" src="/javascripts/acelog.js"></script>
        
        
        
        
        

    </body>
</html>